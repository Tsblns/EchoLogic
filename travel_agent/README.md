# 旅行助手 ( Agent)  说明文档

## 一、需求描述

### （一）用户需求背景

现代用户在规划旅行时，常面临 “信息分散查询” 的痛点 —— 需分别打开天气 APP 查目的地天气、在小红书等平台找旅行攻略、手动筛选适配天气的景点，流程繁琐且耗时。本旅行助手 Agent 旨在通过 AI 整合能力，让用户仅通过一次交互，即可获取 “天气 + 攻略 + 景点推荐” 的一站式旅行规划信息，降低旅行规划的时间成本与操作复杂度。

### （二）功能需求

1. **交互功能**

- 支持双输入方式：用户可通过打字输入（如 “推荐北京明天的旅游景点”）或语音输入（如口述 “帮我查上海后天的天气和攻略”）发起请求；

- 支持双输出方式：智能体可通过文字回复（含结构化景点推荐列表）或语音播报（关键信息如天气、核心景点）反馈结果；

- 多轮对话记忆：能记住当前会话中的上下文（如用户先问 “北京天气”，后续补充 “推荐景点”，无需重复询问目的地和时间）。

1. **核心业务功能**

- 目的地与时间解析：自动从用户输入中提取 “目的地”（如城市名）和 “旅行时间”，若未输入时间则默认当天；

- 天气查询：调用外部天气 API，获取目的地指定日期的天气数据（含温度、降水概率、风力等）；

- 小红书攻略抓取：获取目的地相关的前 5 篇高赞 / 近期攻略，提取核心信息（如推荐景点、游玩 Tips、避坑点）；

- 智能景点推荐：结合天气数据（如雨天优先室内景点、晴天推荐户外景点）和攻略信息，生成 3-5 个适配的景点推荐，含 “景点名称 + 推荐理由（关联天气 / 攻略）+ 简要游玩建议”。

1. **异常处理功能**

- 输入解析失败：若无法提取目的地（如用户仅说 “推荐景点”），则提示 “请补充旅行目的地哦～”；

- 天气 API 调用失败：若天气数据获取超时或异常，提示 “当前天气查询暂时 unavailable，请稍后再试”；

- 小红书攻略获取失败：若未找到对应目的地攻略，提示 “暂未找到该目的地的小红书攻略，将基于通用景点推荐”。

### （三）非功能需求

1. 响应效率：从用户输入完成到输出结果，总耗时不超过 10 秒（含 API 调用、攻略抓取、推荐计算）；

1. 准确性：天气数据误差不超过官方 API 的默认范围，攻略信息提取准确率不低于 80%（核心景点、游玩建议无明显偏差）；

1. 易用性：前端界面简洁，输入区域（打字 / 语音按钮）、结果展示区域（文字 / 语音切换按钮）清晰可见，无学习成本；

1. 稳定性：连续 10 次正常请求无崩溃，异常场景（如无效目的地）能返回友好提示，不出现空白或乱码。

## 二、业务流描述

### （一）整体流程概览

用户发起请求 → 交互模块处理输入 → 意图解析与信息提取 → 工具调用（天气 API + 小红书攻略） → 数据整合与景点推荐 → 结果输出 → 支持多轮对话补充

### （二）详细流程步骤（含分支与异常）

 。。。

## 三、实现说明

### （一）技术栈选择

| 模块           | 技术 / 工具                           | 选择理由                                                     |
| -------------- | ------------------------------------- | ------------------------------------------------------------ |
| 核心框架       | Python + LangGraph + MCP 协议         | Python 生态丰富，LangGraph 支持对话记忆与工具链串联，MCP 协议适配智能体工具调用标准 |
| 语音交互       | OpenAI Whisper（ASR）+ pyttsx3（TTS） | Whisper 支持多语言语音转文字，准确率高；pyttsx3 轻量，支持离线语音播报 |
| 天气 API       | 高德开放平台天气 API                  | 免费额度充足，支持城市 + 日期查询，数据实时性强              |
| 小红书攻略获取 | 小红书开放平台 API（或合规爬虫）      | 优先使用官方 API 确保合规，若无权限则采用轻量爬虫（提取公开高赞内容，规避反爬） |
| 前端界面       | Vue3 + Vite                           | 轻量易上手，组件化开发，适配 PC / 移动端，支持快速对接后端接口 |
| 后端服务       | Flask                                 | 轻量级 Python Web 框架，易与 LangChain、MCP 模块整合，快速搭建接口 |
| 对话记忆存储   | ...                                   | 无需额外数据库，轻量存储当前会话上下文，适配多轮对话需求     |
